<main class="container mt-5">
  {{#if logged_in}}
    <div class="dashboard-background">
      <div class="row">
        {{#each category}}
          <div class="col-md-3 mb-3">
            <div class="card">
              <div class="card-header">
                <h2 class="card-title">
                  <h3>{{category_name}}</h3>
                </h2>
              </div>
              <div class="card-body text-dark post-background" id="adjust-parent">
                {{#each products}}
                  <div class="product mb-3" style="border: 1px solid #ccc; padding: 10px;">
                    <p><h5>{{product_name}}</h5>
                    <p>{{id}}</p>
                    <h6>Price: ${{price}} / {{unit}}</h6> 
                    <h6>Par: {{par}}</h6>
                    <h6>Stock: {{stock}}
                      {{#if (lt stock par)}} <p style="color:red;"><i class="bi bi-exclamation-octagon"></i><b> LOW STOCK</b></p>{{/if}}
                      {{#if (gt stock par)}} <p style="color:rgb(199, 201, 74)"><i class="bi bi-exclamation-octagon-fill"></i><b> OVER PAR</b></p>{{/if}}
                      {{#if (eq stock par)}} <p style="color:rgb(0, 255, 13);"><i class="bi bi-check-circle-fill"></i><b> On Par</b></p>{{/if}}
                  </div>
                    <label for="quantity" class="mb-3">Add Stock:</label>
                    <input type="number" id="quantity" min="-64" value="1" max="64" required style="width: 75px;" class="mb-3">
                    <button type="button" class="mb-3 adjust" data-product-id="{{id}}" data-key="stock">Adjust Stock</button>
                    <label for="price" class="mb-3">Edit Price:</label>
                    <input type="number" id="price" min="-64" value="{{price}}" max="64" required style="width: 75px;" class="mb-3">
                    <button type="button" class="mb-3 adjust" data-product-id="{{id}}" data-key="price">Adjust Price</button>
                    <label for="unit" class="mb-3">Edit Unit:</label>
                    <input type="string" id="unit" min="-64" value="{{unit}}" max="64" required style="width: 75px;" class="mb-3">
                    <button type="button" class="mb-3 adjust" data-product-id="{{id}}" data-key="unit">Adjust Unit</button>
                    <label for="par" class="mb-3">Edit Par:</label>
                    <input type="number" id="par" min="-64" value="{{par}}" max="64" required style="width: 75px;" class="mb-3">
                    <button type="button" class="mb-3 adjust" data-product-id="{{id}}" data-key="par">Adjust par</button>
                    <div class="text-end">
                    <button type="button" class="btn btn-danger btn-sm mb-3 delete-product" data-product-id="{{id}}">Delete</button>
                    </div>
                {{/each}}
              </div>
            </div>
          </div>
        {{/each}}
      </div>
      {{else}}
      <div class="col-md-3 mb-3 text-center">
        <p>Please <a class="nav-link" href="/login">Login</a></p>
      </div>
  {{/if}}
</main>
